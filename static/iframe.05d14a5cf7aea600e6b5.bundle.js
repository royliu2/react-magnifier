(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,n){"use strict";var o=n(97),i=n.n(o),r=n(1),s=n.n(r),c=n(0),a=n.n(c),u=n(416),f=n.n(u),m=n(332),h=n.n(m);function g(e,t){for(var n,o=0;o<t.length;o++)(n=t[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function d(){return(d=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],!(0<=t.indexOf(n))&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".magnifier {\n  position: relative;\n  display: inline-block;\n  line-height: 0; }\n\n.magnifier-image {\n  cursor: none; }\n\n.magnifying-glass {\n  position: absolute;\n  z-index: 1;\n  transition: opacity 0.3s;\n  background: #E5E5E5 no-repeat;\n  border: solid #EBEBEB;\n  box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.3);\n  pointer-events: none;\n  opacity: 0; }\n  .magnifying-glass.circle {\n    border-radius: 50%; }\n  .magnifying-glass.visible {\n    opacity: 1; }\n");var w={src:a.a.string.isRequired,width:a.a.oneOfType([a.a.number,a.a.string]),height:a.a.oneOfType([a.a.number,a.a.string]),className:a.a.string,zoomImgSrc:a.a.string,zoomFactor:a.a.number,mgWidth:a.a.number,mgHeight:a.a.number,mgBorderWidth:a.a.number,mgShape:a.a.oneOf(["circle","square"]),mgShowOverflow:a.a.bool,mgMouseOffsetX:a.a.number,mgMouseOffsetY:a.a.number,mgTouchOffsetX:a.a.number,mgTouchOffsetY:a.a.number},y=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==i()(t)&&"function"!=typeof t?b(e):t}(this,p(t).call(this,e)),!e.src)throw Error("Missing src prop");return n.state={showZoom:!1,mgOffsetX:0,mgOffsetY:0,relX:0,relY:0},n.onMouseMove=h()(n.onMouseMove.bind(b(b(n))),20,{trailing:!1}),n.onMouseOut=n.onMouseOut.bind(b(b(n))),n.onTouchMove=h()(n.onTouchMove.bind(b(b(n))),20,{trailing:!1}),n.onTouchEnd=n.onTouchEnd.bind(b(b(n))),n.calcImgBounds=n.calcImgBounds.bind(b(b(n))),n.calcImgBoundsDebounced=f()(n.calcImgBounds,200),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["PureComponent"]),l(t,null,[{key:"enforceRelative",value:function(e){return 0>e?0:1<e?1:e}}]),l(t,[{key:"componentDidMount",value:function(){this.img.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.img.addEventListener("mouseout",this.onMouseOut,{passive:!1}),this.img.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.img.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.img.addEventListener("touchend",this.onTouchEnd,{passive:!1}),window.addEventListener("resize",this.calcImgBoundsDebounced),window.addEventListener("scroll",this.calcImgBoundsDebounced,!0)}},{key:"componentWillUnmount",value:function(){this.img.removeEventListener("mousemove",this.onMouseMove),this.img.removeEventListener("mouseout",this.onMouseMove),this.img.removeEventListener("touchstart",this.onMouseMove),this.img.removeEventListener("touchmove",this.onMouseMove),this.img.removeEventListener("touchend",this.onMouseMove),window.removeEventListener("resize",this.calcImgBoundsDebounced),window.removeEventListener("scroll",this.calcImgBoundsDebounced)}},{key:"onMouseMove",value:function(e){var n=this.props,o=n.mgMouseOffsetX,i=n.mgMouseOffsetY;if(this.imgBounds){var r=(e.clientX-this.imgBounds.left)/e.target.clientWidth,s=(e.clientY-this.imgBounds.top)/e.target.clientHeight;this.setState({showZoom:!0,relX:t.enforceRelative(r),relY:t.enforceRelative(s),mgOffsetX:o,mgOffsetY:i})}}},{key:"onTouchStart",value:function(e){e.preventDefault()}},{key:"onTouchMove",value:function(e){if(e.preventDefault(),this.imgBounds){var n=this.props,o=n.mgTouchOffsetX,i=n.mgTouchOffsetY,r=(e.targetTouches[0].clientX-this.imgBounds.left)/e.target.clientWidth,s=(e.targetTouches[0].clientY-this.imgBounds.top)/e.target.clientHeight;0<=r&&0<=s&&1>=r&&1>=s?this.setState({showZoom:!0,relX:t.enforceRelative(r),relY:t.enforceRelative(s),mgOffsetX:o,mgOffsetY:i}):this.setState({showZoom:!1})}}},{key:"onMouseOut",value:function(){this.setState({showZoom:!1})}},{key:"onTouchEnd",value:function(){this.setState({showZoom:!1})}},{key:"calcImgBounds",value:function(){this.imgBounds=this.img.getBoundingClientRect()}},{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.width,i=t.height,r=t.className,c=t.zoomImgSrc,a=t.zoomFactor,u=t.mgHeight,f=t.mgWidth,m=t.mgBorderWidth,h=(t.mgMouseOffsetX,t.mgMouseOffsetY,t.mgTouchOffsetX,t.mgTouchOffsetY,t.mgShape),g=t.mgShowOverflow,l=O(t,["src","width","height","className","zoomImgSrc","zoomFactor","mgHeight","mgWidth","mgBorderWidth","mgMouseOffsetX","mgMouseOffsetY","mgTouchOffsetX","mgTouchOffsetY","mgShape","mgShowOverflow"]),p=this.state,v=p.mgOffsetX,b=p.mgOffsetY,w=p.relX,y=p.relY,E="magnifying-glass";return p.showZoom&&(E+=" visible"),"circle"===h&&(E+=" circle"),s.a.createElement("div",{className:"magnifier ".concat(r),style:{width:o,height:i,overflow:g?"visible":"hidden"}},s.a.createElement("img",d({className:"magnifier-image",src:n,width:"100%",height:"100%"},l,{onLoad:function(){e.calcImgBounds()},ref:function(t){e.img=t}})),this.imgBounds&&s.a.createElement("div",{className:E,style:{width:f,height:u,left:"calc(".concat(100*w,"% - ").concat(f/2,"px + ").concat(v,"px - ").concat(m,"px)"),top:"calc(".concat(100*y,"% - ").concat(u/2,"px + ").concat(b,"px - ").concat(m,"px)"),backgroundImage:"url(".concat(c||n,")"),backgroundPosition:"calc(".concat(100*w,"% + ").concat(f/2,"px - ").concat(w*f,"px) calc(").concat(100*y,"% + ").concat(u/2,"px - ").concat(y*f,"px)"),backgroundSize:"".concat(a*this.imgBounds.width,"% ").concat(a*this.imgBounds.height,"%"),borderWidth:m}}))}}]),t}();y.propTypes=w,y.defaultProps={width:"100%",height:"auto",className:"",zoomImgSrc:null,zoomFactor:1.5,mgWidth:150,mgHeight:150,mgBorderWidth:2,mgShape:"circle",mgShowOverflow:!0,mgMouseOffsetX:0,mgMouseOffsetY:0,mgTouchOffsetX:-50,mgTouchOffsetY:-50},t.a=y},140:function(e,t,n){e.exports=n.p+"static/media/test-image.fbc2db38.jpg"},417:function(e,t,n){e.exports=n.p+"static/media/test-image-small.97785a79.jpg"},418:function(e,t,n){n(164),n(419),e.exports=n(420)},420:function(e,t,n){"use strict";n.r(t),function(e){var t=n(138),o=n(433);Object(t.configure)(function(){o.keys().forEach(function(e){return o(e)})},e)}.call(this,n(263)(e))},433:function(e,t,n){var o={"./index.stories.js":434};function i(e){var t=r(e);return n(t)}function r(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=433},434:function(e,t,n){"use strict";n.r(t),function(e){var t=n(1),o=n.n(t),i=n(138),r=n(139),s=n(140),c=n.n(s),a=n(417),u=n.n(a);Object(i.addDecorator)(function(e){return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"100px 0"}},e())}),Object(i.storiesOf)("Magnifier",e).add("Round",function(){return o.a.createElement(r.a,{src:c.a,width:"50%"})}).add("Square",function(){return o.a.createElement(r.a,{src:c.a,mgShape:"square",width:"50%"})}).add("Hide overflow",function(){return o.a.createElement(r.a,{src:c.a,mgShowOverflow:!1,mgTouchOffsetX:0,mgTouchOffsetY:0,width:"50%"})}).add("Different images",function(){return o.a.createElement(r.a,{src:u.a,zoomImgSrc:c.a,width:"50%"})})}.call(this,n(263)(e))}},[[418,2,4]]]);
//# sourceMappingURL=iframe.05d14a5cf7aea600e6b5.bundle.js.map